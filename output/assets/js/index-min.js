class Subject{constructor(){this.tasks=[],this.observers=[]}isSubscribed(s){return this.observers.filter(t=>t===s).length}subscribe(s){this.isSubscribed(s)||this.observers.push(s)}unsubscribe(s){this.observers=this.observers.filter(t=>t!==s)}notify(s){console.log("notified"),this.observers.forEach(t=>t(s))}addTask(s){this.tasks.push(s),this.notify(this.tasks)}removeTask(s){this.tasks=this.tasks.filter(t=>t.id!==s),this.notify(this.tasks)}getTasks(){return this.tasks}}class Task{constructor(s){this.id=(new Date).getTime(),this.content=s,this.completed=!1}}class TaskInput{constructor(s){this.subject=s,this._bindEvents()}_bindEvents(){const s=document.getElementById("todo-button-add"),t=document.getElementById("todo-input");s.addEventListener("click",()=>{if(t.value){const s=new Task(t.value);return this.subject.addTask(s),console.log("Added task!",this.subject),void(t.value="")}alert("Type something!")})}}class TasksList{constructor(s){this.subject=s}renderTasks(){const s=document.getElementById("todo-items");s.innerHTML="",this.subject.getTasks().forEach(t=>{console.log(t);const e=document.createElement("li"),n=document.createElement("span");n.innerText=t.content,e.append(n),s.append(e)})}}function dupa(){console.log("pizda")}!function(){const s=new Subject;new TasksList(s);new TaskInput(s),s.subscribe(dupa())}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN1YmplY3RzL1N1YmplY3QuanMiLCJvYnNlcnZlcnMvVGFzay5qcyIsIm9ic2VydmVycy9UYXNrSW5wdXQuanMiLCJvYnNlcnZlcnMvVGFza3NMaXN0LmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJTdWJqZWN0IiwiW29iamVjdCBPYmplY3RdIiwidGhpcyIsInRhc2tzIiwib2JzZXJ2ZXJzIiwiZiIsImZpbHRlciIsInN1YnNjcmliZXIiLCJsZW5ndGgiLCJpc1N1YnNjcmliZWQiLCJwdXNoIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJmb3JFYWNoIiwib2JzZXJ2ZXIiLCJ0Iiwibm90aWZ5IiwiaWQiLCJ0YXNrIiwiVGFzayIsImNvbnRlbnQiLCJEYXRlIiwiZ2V0VGltZSIsImNvbXBsZXRlZCIsIlRhc2tJbnB1dCIsInN1YmplY3QiLCJfYmluZEV2ZW50cyIsImFkZEJ1dHRvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsImFkZFRhc2siLCJhbGVydCIsIlRhc2tzTGlzdCIsInRhc2tzQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwiZ2V0VGFza3MiLCJ0YXNrSXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJ0YXNrQ29udGVudCIsImlubmVyVGV4dCIsImFwcGVuZCIsImR1cGEiLCJzdWJzY3JpYmUiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQ0pDLGNBQ0VDLEtBQUtDLE1BQVEsR0FDYkQsS0FBS0UsVUFBWSxHQUduQkgsYUFBYUksR0FDWCxPQUFPSCxLQUFLRSxVQUFVRSxPQUFPQyxHQUFjQSxJQUFlRixHQUFHRyxPQUcvRFAsVUFBVUksR0FDSkgsS0FBS08sYUFBYUosSUFDdEJILEtBQUtFLFVBQVVNLEtBQUtMLEdBR3RCSixZQUFZSSxHQUNWSCxLQUFLRSxVQUFZRixLQUFLRSxVQUFVRSxPQUFPQyxHQUFjQSxJQUFlRixHQUd0RUosT0FBT1UsR0FDTEMsUUFBUUMsSUFBSSxZQUNaWCxLQUFLRSxVQUFVVSxRQUFRQyxHQUFZQSxFQUFTSixJQUc5Q1YsUUFBUWUsR0FDTmQsS0FBS0MsTUFBTU8sS0FBS00sR0FDaEJkLEtBQUtlLE9BQU9mLEtBQUtDLE9BR25CRixXQUFXaUIsR0FDVGhCLEtBQUtDLE1BQVFELEtBQUtDLE1BQU1HLE9BQU9hLEdBQVFBLEVBQUtELEtBQU9BLEdBQ25EaEIsS0FBS2UsT0FBT2YsS0FBS0MsT0FHbkJGLFdBQ0UsT0FBT0MsS0FBS0MsT0FLaEIsTUFBTWlCLEtBQ0puQixZQUFZb0IsR0FDVm5CLEtBQUtnQixJQUFLLElBQUlJLE1BQU9DLFVBQ3JCckIsS0FBS21CLFFBQVVBLEVBQ2ZuQixLQUFLc0IsV0FBWSxHQUtyQixNQUFNQyxVQUNKeEIsWUFBWXlCLEdBQ1Z4QixLQUFLd0IsUUFBVUEsRUFFZnhCLEtBQUt5QixjQUdQMUIsY0FDRSxNQUFNMkIsRUFBWUMsU0FBU0MsZUFBZSxtQkFDcENDLEVBQVFGLFNBQVNDLGVBQWUsY0FDdENGLEVBQVVJLGlCQUFpQixRQUFTLEtBQ2xDLEdBQUlELEVBQU1FLE1BQU8sQ0FDZixNQUFNZCxFQUFPLElBQUlDLEtBQUtXLEVBQU1FLE9BSTVCLE9BSEEvQixLQUFLd0IsUUFBUVEsUUFBUWYsR0FDckJQLFFBQVFDLElBQUksY0FBZVgsS0FBS3dCLGNBQ2hDSyxFQUFNRSxNQUFRLElBSWhCRSxNQUFNLHNCQU1aLE1BQU1DLFVBQ0puQyxZQUFZeUIsR0FDVnhCLEtBQUt3QixRQUFVQSxFQUdqQnpCLGNBQ0UsTUFBTW9DLEVBQWlCUixTQUFTQyxlQUFlLGNBQy9DTyxFQUFlQyxVQUFZLEdBQzNCcEMsS0FBS3dCLFFBQVFhLFdBQVd6QixRQUFRSyxJQUM5QlAsUUFBUUMsSUFBSU0sR0FDWixNQUFNcUIsRUFBV1gsU0FBU1ksY0FBYyxNQUNsQ0MsRUFBY2IsU0FBU1ksY0FBYyxRQUMzQ0MsRUFBWUMsVUFBWXhCLEVBQUtFLFFBQzdCbUIsRUFBU0ksT0FBT0YsR0FDaEJMLEVBQWVPLE9BQU9KLE1BYTVCLFNBQVNLLE9BQ1BqQyxRQUFRQyxJQUFJLFVBUmQsV0FDRSxNQUFNYSxFQUFVLElBQUkxQixRQUNGLElBQUlvQyxVQUFVVixHQUNoQyxJQUFJRCxVQUFVQyxHQUNkQSxFQUFRb0IsVUFBVUQsUUFKcEIiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTdWJqZWN0IHtcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgIHRoaXMudGFza3MgPSBbXTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICB9XG5cbiAgICBpc1N1YnNjcmliZWQgKGYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmZpbHRlcihzdWJzY3JpYmVyID0+IHN1YnNjcmliZXIgPT09IGYpLmxlbmd0aDtcbiAgICB9XG5cbiAgICBzdWJzY3JpYmUgKGYpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdWJzY3JpYmVkKGYpKSByZXR1cm47XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goZik7XG4gICAgfVxuXG4gICAgdW5zdWJzY3JpYmUoZikge1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLmZpbHRlcihzdWJzY3JpYmVyID0+IHN1YnNjcmliZXIgIT09IGYpO1xuICAgIH1cblxuICAgIG5vdGlmeSAoZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZygnbm90aWZpZWQnKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMuZm9yRWFjaChvYnNlcnZlciA9PiBvYnNlcnZlcihkYXRhKSk7XG4gICAgfVxuXG4gICAgYWRkVGFzayAodCkge1xuICAgICAgICB0aGlzLnRhc2tzLnB1c2godCk7XG4gICAgICAgIHRoaXMubm90aWZ5KHRoaXMudGFza3MpO1xuICAgIH1cblxuICAgIHJlbW92ZVRhc2sgKGlkKSB7XG4gICAgICAgIHRoaXMudGFza3MgPSB0aGlzLnRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2suaWQgIT09IGlkKTtcbiAgICAgICAgdGhpcy5ub3RpZnkodGhpcy50YXNrcyk7XG4gICAgfVxuXG4gICAgZ2V0VGFza3MgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrcztcbiAgICB9XG59XG4iLCJjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvciAoY29udGVudCkge1xuICAgICAgICB0aGlzLmlkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG4gICAgfVxufVxuIiwiY2xhc3MgVGFza0lucHV0IHtcbiAgICBjb25zdHJ1Y3RvciAoc3ViamVjdCkge1xuICAgICAgICB0aGlzLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgICB0aGlzLl9iaW5kRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgX2JpbmRFdmVudHMgKCkge1xuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1idXR0b24tYWRkJyk7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8taW5wdXQnKTtcblxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrID0gbmV3IFRhc2soaW5wdXQudmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0LmFkZFRhc2sodGFzayk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FkZGVkIHRhc2shJywgdGhpcy5zdWJqZWN0KTtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbGVydCgnVHlwZSBzb21ldGhpbmchJyk7XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiY2xhc3MgVGFza3NMaXN0IHtcbiAgICBjb25zdHJ1Y3RvciAoc3ViamVjdCkge1xuICAgICAgICB0aGlzLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgIH1cblxuICAgIHJlbmRlclRhc2tzICgpIHtcbiAgICAgICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1pdGVtcycpO1xuXG4gICAgICAgIHRhc2tzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIHRoaXMuc3ViamVjdC5nZXRUYXNrcygpLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2spO1xuICAgICAgICAgICAgY29uc3QgdGFza0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgY29uc3QgdGFza0NvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cbiAgICAgICAgICAgIHRhc2tDb250ZW50LmlubmVyVGV4dCA9IHRhc2suY29udGVudDtcblxuICAgICAgICAgICAgdGFza0l0ZW0uYXBwZW5kKHRhc2tDb250ZW50KTtcbiAgICAgICAgICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZCh0YXNrSXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIihmdW5jdGlvbiBpbml0ICgpIHtcbiAgICBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcbiAgICBjb25zdCB0YXNrc0xpc3QgPSBuZXcgVGFza3NMaXN0KHN1YmplY3QpO1xuXG4gICAgbmV3IFRhc2tJbnB1dChzdWJqZWN0KTtcblxuICAgIHN1YmplY3Quc3Vic2NyaWJlKGR1cGEoKSk7XG59KSgpO1xuXG5mdW5jdGlvbiBkdXBhICgpIHtcbiAgICBjb25zb2xlLmxvZygncGl6ZGEnKTtcbn1cblxuXG4vLyBjbGFzcyBUYXNrIHtcbi8vICAgICBjb25zdHJ1Y3RvciAoY29udGVudCkge1xuLy8gICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuLy8gICAgICAgICB0aGlzLmlzQ29tcGxldGVkID0gZmFsc2U7XG4vLyAgICAgfVxuLy8gfVxuLy9cbi8vIGNsYXNzIFRvRG9MaXN0IHtcbi8vICAgICBjb25zdHJ1Y3RvciAodGFza3NDb250YWluZXIpIHtcbi8vICAgICAgICAgdGhpcy50YXNrc0NvbnRhaW5lciA9IHRhc2tzQ29udGFpbmVyO1xuLy8gICAgICAgICB0aGlzLnRhc2tzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKSkgfHwgW107XG4vLyAgICAgICAgIHRoaXMuX2FjdGl2ZVRhc2tzID0gW107XG4vLyAgICAgICAgIHRoaXMuX2NvbXBsZXRlZFRhc2tzID0gW107XG4vL1xuLy8gICAgICAgICB0aGlzLmJpbmRBZGRUYXNrQnV0dG9uKCk7XG4vLyAgICAgICAgIHRoaXMuY3JlYXRlVGFza3NGaWx0ZXJzKCk7XG4vLyAgICAgICAgIHRoaXMuY3JlYXRlVGFza3NMaXN0KHRoaXMudGFza3MpO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgZ2V0IGFjdGl2ZVRhc2tzICgpIHtcbi8vICAgICAgICAgdGhpcy5fYWN0aXZlVGFza3MgPSB0aGlzLnRhc2tzLmZpbHRlcigodGFzaykgPT4gdGFzay5pc0NvbXBsZXRlZCA9PT0gZmFsc2UpO1xuLy8gICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlVGFza3M7XG4vLyAgICAgfVxuLy9cbi8vICAgICBnZXQgY29tcGxldGVkVGFza3MgKCkge1xuLy8gICAgICAgICB0aGlzLl9jb21wbGV0ZWRUYXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmlzQ29tcGxldGVkID09PSB0cnVlKTtcbi8vICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBsZXRlZFRhc2tzO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgYmluZEFkZFRhc2tCdXR0b24gKCkge1xuLy8gICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1idXR0b24tYWRkJyk7XG4vLyAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8taW5wdXQnKTtcbi8vXG4vLyAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGUpID0+IHtcbi8vICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuLy8gICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVRhc2soaW5wdXQudmFsdWUpO1xuLy8gICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0pXG4vL1xuLy8gICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4vLyAgICAgICAgICAgICB0aGlzLnNhdmVUYXNrKGlucHV0LnZhbHVlKTtcbi8vICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4vLyAgICAgICAgIH0pXG4vLyAgICAgfVxuLy9cbi8vICAgICBzYXZlVGFzayAoY29udGVudCkge1xuLy8gICAgICAgICBpZiAoY29udGVudCAhPT0gJycpIHtcbi8vICAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBuZXcgVGFzayhjb250ZW50KTtcbi8vICAgICAgICAgICAgIHRoaXMudGFza3MudW5zaGlmdCh0YXNrKTtcbi8vICAgICAgICAgICAgIHRoaXMuYWRkVG9Mb2NhbFN0b3JhZ2UoKTtcbi8vICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFza3NMaXN0KHRoaXMudGFza3MpO1xuLy9cbi8vICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgYWxlcnQoJ1R5cGUgc29tZXRoaW5nIScpO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgY3JlYXRlVGFza3NMaXN0ICh0YXNrc0FycmF5KSB7XG4vLyAgICAgICAgIHRoaXMuY3JlYXRlQWN0aXZlVGFza3NDb3VudGVyKCk7XG4vLyAgICAgICAgIHRoaXMudGFza3NDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4vL1xuLy8gICAgICAgICB0YXNrc0FycmF5LmZvckVhY2goKHRhc2ssIHRhc2tJbmRleCkgPT4ge1xuLy8gICAgICAgICAgICAgY29uc3QgdGFza0l0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuLy8gICAgICAgICAgICAgY29uc3QgdGFza0NvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4vLyAgICAgICAgICAgICBjb25zdCB0YXNrQWN0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuLy9cbi8vICAgICAgICAgICAgIGNvbnN0IGRvbmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbi8vICAgICAgICAgICAgIGNvbnN0IGRvbmVUYXNrQ2xhc3MgPSAndG9kby1pdGVtLWNvbXBsZXRlZCc7XG4vLyAgICAgICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbi8vXG4vLyAgICAgICAgICAgICB0YXNrSXRlbS5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW0nKTtcbi8vICAgICAgICAgICAgIHRhc2tDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3RvZG8taXRlbS1jb250ZW50Jyk7XG4vLyAgICAgICAgICAgICB0YXNrQWN0aW9ucy5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW0tYWN0aW9ucycpO1xuLy9cbi8vICAgICAgICAgICAgIHRhc2tDb250ZW50LmlubmVySFRNTCA9IHRhc2suY29udGVudDtcbi8vXG4vLyAgICAgICAgICAgICBkb25lQnV0dG9uLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndG9kby10YXNrLWJ1dHRvbiB0b2RvLWRvbmUtYnV0dG9uJylcbi8vICAgICAgICAgICAgIGRvbmVCdXR0b24uaW5uZXJIVE1MID0gJ0RvbmUnO1xuLy9cbi8vICAgICAgICAgICAgIGRvbmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuLy8gICAgICAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZChkb25lVGFza0NsYXNzKTtcbi8vICAgICAgICAgICAgICAgICB0YXNrQWN0aW9ucy5yZW1vdmVDaGlsZChkb25lQnV0dG9uKTtcbi8vICAgICAgICAgICAgICAgICB0YXNrLmlzQ29tcGxldGVkID0gdHJ1ZTtcbi8vICAgICAgICAgICAgICAgICB0aGlzLmFkZFRvTG9jYWxTdG9yYWdlKCk7XG4vLyAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0xpc3QodGhpcy50YXNrcyk7XG4vLyAgICAgICAgICAgICB9KVxuLy9cbi8vICAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RvZG8tdGFzay1idXR0b24gdG9kby1yZW1vdmUtYnV0dG9uJylcbi8vICAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5pbm5lckhUTUwgPSAnRGVsZXRlJztcbi8vXG4vLyAgICAgICAgICAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4vLyAgICAgICAgICAgICAgICAgdGhpcy50YXNrc0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0YXNrSXRlbSk7XG4vLyAgICAgICAgICAgICAgICAgdGhpcy50YXNrcy5zcGxpY2UodGFza0luZGV4LCAxKTtcbi8vICAgICAgICAgICAgICAgICB0aGlzLmFkZFRvTG9jYWxTdG9yYWdlKCk7XG4vLyAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0xpc3QodGhpcy50YXNrcyk7XG4vLyAgICAgICAgICAgICB9KVxuLy9cbi8vICAgICAgICAgICAgIGlmICh0YXNrLmlzQ29tcGxldGVkKSB7XG4vLyAgICAgICAgICAgICAgICAgdGFza0l0ZW0uY2xhc3NMaXN0LmFkZChkb25lVGFza0NsYXNzKTtcbi8vICAgICAgICAgICAgICAgICB0YXNrQWN0aW9ucy5hcHBlbmQocmVtb3ZlQnV0dG9uKTtcbi8vICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICBpZiAoIXRhc2suaXNDb21wbGV0ZWQpIHtcbi8vICAgICAgICAgICAgICAgICB0YXNrQWN0aW9ucy5hcHBlbmQoZG9uZUJ1dHRvbiwgcmVtb3ZlQnV0dG9uKTtcbi8vICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICB0YXNrSXRlbS5hcHBlbmQodGFza0NvbnRlbnQsIHRhc2tBY3Rpb25zKTtcbi8vICAgICAgICAgICAgIHRoaXMudGFza3NDb250YWluZXIuYXBwZW5kKHRhc2tJdGVtKTtcbi8vICAgICAgICAgfSlcbi8vICAgICB9XG4vL1xuLy8gICAgIGNyZWF0ZVRhc2tzRmlsdGVycyAoKSB7XG4vLyAgICAgICAgIGNvbnN0IHNob3dBbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1zaG93LWFsbCcpO1xuLy8gICAgICAgICBjb25zdCBzaG93QWN0aXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8tc2hvdy1hY3RpdmUnKTtcbi8vICAgICAgICAgY29uc3Qgc2hvd0NvbXBsZXRlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXNob3ctY29tcGxldGVkJyk7XG4vLyAgICAgICAgIGNvbnN0IGNsZWFyQ29tcGxldGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8tY2xlYXItY29tcGxldGVkJyk7XG4vL1xuLy8gICAgICAgICBzaG93QWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbi8vICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFza3NMaXN0KHRoaXMudGFza3MpO1xuLy8gICAgICAgICB9KVxuLy9cbi8vICAgICAgICAgc2hvd0FjdGl2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4vLyAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRhc2tzTGlzdCh0aGlzLmFjdGl2ZVRhc2tzKTtcbi8vICAgICAgICAgfSlcbi8vXG4vLyAgICAgICAgIHNob3dDb21wbGV0ZWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuLy8gICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0xpc3QodGhpcy5jb21wbGV0ZWRUYXNrcyk7XG4vLyAgICAgICAgIH0pXG4vL1xuLy8gICAgICAgICBjbGVhckNvbXBsZXRlZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4vLyAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4vL1xuLy8gICAgICAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkVGFza3MubGVuZ3RoKSB7XG4vLyAgICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWRUYXNrcy5mb3JFYWNoKGNvbXBsZXRlZFRhc2sgPT4ge1xuLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tzLnNwbGljZSh0aGlzLnRhc2tzLmZpbmRJbmRleCh0YXNrID0+IHRhc2suY29udGVudCA9PT0gY29tcGxldGVkVGFzay5jb250ZW50KSwgMSk7XG4vLyAgICAgICAgICAgICAgICAgfSlcbi8vXG4vLyAgICAgICAgICAgICAgICAgdGhpcy5hZGRUb0xvY2FsU3RvcmFnZSgpO1xuLy8gICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFza3NMaXN0KHRoaXMudGFza3MpO1xuLy9cbi8vICAgICAgICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgICAgICB9XG4vL1xuLy8gICAgICAgICAgICAgYWxlcnQoJ0FsbCB0YXNrcyBoYXZlIGFjdGl2ZSBzdGF0dXMhJyk7XG4vLyAgICAgICAgIH0pXG4vLyAgICAgfVxuLy9cbi8vICAgICBhZGRUb0xvY2FsU3RvcmFnZSAoKSB7XG4vLyAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRoaXMudGFza3MpKTtcbi8vICAgICB9XG4vL1xuLy8gICAgIGNyZWF0ZUFjdGl2ZVRhc2tzQ291bnRlciAoKSB7XG4vLyAgICAgICAgIGNvbnN0IGNvdW50ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1jb3VudGVyJyk7XG4vLyAgICAgICAgIGxldCBhbW91bnQgPSB0aGlzLmFjdGl2ZVRhc2tzLmxlbmd0aDtcbi8vXG4vLyAgICAgICAgIHN3aXRjaCAoYW1vdW50KSB7XG4vLyAgICAgICAgICAgICBjYXNlIDA6XG4vLyAgICAgICAgICAgICAgICAgY291bnRlci5pbm5lckhUTUwgPSAnQWxsIHRhc2tzIGNvbXBsZXRlZCEnO1xuLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xuLy8gICAgICAgICAgICAgY2FzZSAxOlxuLy8gICAgICAgICAgICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gYCR7YW1vdW50fSB0YXNrIGxlZnRgO1xuLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xuLy8gICAgICAgICAgICAgZGVmYXVsdDpcbi8vICAgICAgICAgICAgICAgICBjb3VudGVyLmlubmVySFRNTCA9IGAke2Ftb3VudH0gdGFza3MgbGVmdGA7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4vLyB9XG4vL1xuLy8gY29uc3QgdG9Eb0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWl0ZW1zJyk7XG4vLyBjb25zdCB0b0RvTGlzdCA9IG5ldyBUb0RvTGlzdCh0b0RvQ29udGFpbmVyKTtcbiJdLCJmaWxlIjoiaW5kZXgtbWluLmpzIn0=
