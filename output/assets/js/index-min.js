class Task{constructor(t){this.content=t,this.isCompleted=!1}}class ToDoList{constructor(t){this.tasksContainer=t,this.tasks=JSON.parse(localStorage.getItem("tasks"))||[],this._activeTasks=[],this._completedTasks=[],this.bindAddTaskButton(),this.createTasksFilters(),this.createTasksList(this.tasks)}get activeTasks(){return this._activeTasks=this.tasks.filter(t=>!1===t.isCompleted),this._activeTasks}get completedTasks(){return this._completedTasks=this.tasks.filter(t=>!0===t.isCompleted),this._completedTasks}bindAddTaskButton(){const t=document.getElementById("todo-button-add"),e=document.getElementById("todo-input");e.addEventListener("keyup",t=>{"Enter"===t.key&&(this.saveTask(e.value),e.value="")}),t.addEventListener("click",()=>{this.saveTask(e.value),e.value=""})}saveTask(t){if(""!==t){const e=new Task(t);return this.tasks.unshift(e),this.addToLocalStorage(),void this.createTasksList(this.tasks)}alert("Type something!")}createTasksList(t){this.createActiveTasksCounter(),this.tasksContainer.innerHTML="",t.forEach((t,e)=>{const s=document.createElement("li"),a=document.createElement("span"),o=document.createElement("div"),i=document.createElement("button"),n=document.createElement("button");s.classList.add("todo-item"),a.classList.add("todo-item-content"),o.classList.add("todo-item-actions"),a.innerHTML=t.content,i.setAttribute("class","todo-task-button todo-done-button"),i.innerHTML="Done",i.addEventListener("click",e=>{e.currentTarget.parentNode.parentNode.classList.add("todo-item-completed"),o.removeChild(i),t.isCompleted=!0,this.addToLocalStorage(),this.createTasksList(this.tasks)}),n.setAttribute("class","todo-task-button todo-remove-button"),n.innerHTML="Delete",n.addEventListener("click",()=>{this.tasksContainer.removeChild(s),this.tasks.splice(e,1),this.addToLocalStorage(),this.createTasksList(this.tasks)}),t.isCompleted&&(s.classList.add("todo-item-completed"),o.append(n)),t.isCompleted||o.append(i,n),s.append(a,o),this.tasksContainer.append(s)})}createTasksFilters(){const t=document.getElementById("todo-show-all"),e=document.getElementById("todo-show-active"),s=document.getElementById("todo-show-completed"),a=document.getElementById("todo-clear-completed");t.addEventListener("click",t=>{t.preventDefault(),this.createTasksList(this.tasks)}),e.addEventListener("click",t=>{t.preventDefault(),this.createTasksList(this.activeTasks)}),s.addEventListener("click",t=>{t.preventDefault(),this.createTasksList(this.completedTasks)}),a.addEventListener("click",t=>{if(t.preventDefault(),this.completedTasks.length)return this.completedTasks.forEach(t=>{this.tasks.splice(this.tasks.findIndex(e=>e.content===t.content),1)}),this.addToLocalStorage(),void this.createTasksList(this.tasks);alert("All tasks have active status!")})}addToLocalStorage(){localStorage.setItem("tasks",JSON.stringify(this.tasks))}createActiveTasksCounter(){const t=document.getElementById("todo-counter-content");let e=this.activeTasks.length;switch(e){case 0:t.innerHTML="All tasks completed!";break;case 1:t.innerHTML=`${e} task left`;break;default:t.innerHTML=`${e} tasks left`}}}const toDoContainer=document.getElementById("todo-items"),toDoList=new ToDoList(toDoContainer);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlRhc2siLCJbb2JqZWN0IE9iamVjdF0iLCJjb250ZW50IiwidGhpcyIsImlzQ29tcGxldGVkIiwiVG9Eb0xpc3QiLCJ0YXNrc0NvbnRhaW5lciIsInRhc2tzIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIl9hY3RpdmVUYXNrcyIsIl9jb21wbGV0ZWRUYXNrcyIsImJpbmRBZGRUYXNrQnV0dG9uIiwiY3JlYXRlVGFza3NGaWx0ZXJzIiwiY3JlYXRlVGFza3NMaXN0IiwiYWN0aXZlVGFza3MiLCJmaWx0ZXIiLCJ0YXNrIiwiY29tcGxldGVkVGFza3MiLCJidXR0b24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImtleSIsInNhdmVUYXNrIiwidmFsdWUiLCJ1bnNoaWZ0IiwiYWRkVG9Mb2NhbFN0b3JhZ2UiLCJhbGVydCIsInRhc2tzQXJyYXkiLCJjcmVhdGVBY3RpdmVUYXNrc0NvdW50ZXIiLCJpbm5lckhUTUwiLCJmb3JFYWNoIiwidGFza0luZGV4IiwidGFza0l0ZW0iLCJjcmVhdGVFbGVtZW50IiwidGFza0NvbnRlbnQiLCJ0YXNrQWN0aW9ucyIsImRvbmVCdXR0b24iLCJyZW1vdmVCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJjdXJyZW50VGFyZ2V0IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwic3BsaWNlIiwiYXBwZW5kIiwic2hvd0FsbCIsInNob3dBY3RpdmUiLCJzaG93Q29tcGxldGVkIiwiY2xlYXJDb21wbGV0ZWQiLCJwcmV2ZW50RGVmYXVsdCIsImxlbmd0aCIsImNvbXBsZXRlZFRhc2siLCJmaW5kSW5kZXgiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiY291bnRlciIsImFtb3VudCIsInRvRG9Db250YWluZXIiLCJ0b0RvTGlzdCJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsS0FDSkMsWUFBWUMsR0FDVkMsS0FBS0QsUUFBVUEsRUFDZkMsS0FBS0MsYUFBYyxHQUt2QixNQUFNQyxTQUNKSixZQUFZSyxHQUNWSCxLQUFLRyxlQUFpQkEsRUFDdEJILEtBQUtJLE1BQVFDLEtBQUtDLE1BQU1DLGFBQWFDLFFBQVEsV0FBYSxHQUMxRFIsS0FBS1MsYUFBZSxHQUNwQlQsS0FBS1UsZ0JBQWtCLEdBQ3ZCVixLQUFLVyxvQkFDTFgsS0FBS1kscUJBQ0xaLEtBQUthLGdCQUFnQmIsS0FBS0ksT0FHNUJVLGtCQUVFLE9BREFkLEtBQUtTLGFBQWVULEtBQUtJLE1BQU1XLE9BQU9DLElBQTZCLElBQXJCQSxFQUFLZixhQUM1Q0QsS0FBS1MsYUFHZFEscUJBRUUsT0FEQWpCLEtBQUtVLGdCQUFrQlYsS0FBS0ksTUFBTVcsT0FBT0MsSUFBNkIsSUFBckJBLEVBQUtmLGFBQy9DRCxLQUFLVSxnQkFHZFosb0JBQ0UsTUFBTW9CLEVBQVNDLFNBQVNDLGVBQWUsbUJBQ2pDQyxFQUFRRixTQUFTQyxlQUFlLGNBQ3RDQyxFQUFNQyxpQkFBaUIsUUFBU0MsSUFDaEIsVUFBVkEsRUFBRUMsTUFDSnhCLEtBQUt5QixTQUFTSixFQUFNSyxPQUNwQkwsRUFBTUssTUFBUSxNQUdsQlIsRUFBT0ksaUJBQWlCLFFBQVMsS0FDL0J0QixLQUFLeUIsU0FBU0osRUFBTUssT0FDcEJMLEVBQU1LLE1BQVEsS0FJbEI1QixTQUFTQyxHQUNQLEdBQWdCLEtBQVpBLEVBQWdCLENBQ2xCLE1BQU1pQixFQUFPLElBQUluQixLQUFLRSxHQUl0QixPQUhBQyxLQUFLSSxNQUFNdUIsUUFBUVgsR0FDbkJoQixLQUFLNEIseUJBQ0w1QixLQUFLYSxnQkFBZ0JiLEtBQUtJLE9BSTVCeUIsTUFBTSxtQkFHUi9CLGdCQUFnQmdDLEdBQ2Q5QixLQUFLK0IsMkJBQ0wvQixLQUFLRyxlQUFlNkIsVUFBWSxHQUNoQ0YsRUFBV0csUUFBUSxDQUFDakIsRUFBTWtCLEtBQ3hCLE1BQU1DLEVBQVdoQixTQUFTaUIsY0FBYyxNQUNsQ0MsRUFBY2xCLFNBQVNpQixjQUFjLFFBQ3JDRSxFQUFjbkIsU0FBU2lCLGNBQWMsT0FDckNHLEVBQWFwQixTQUFTaUIsY0FBYyxVQUVwQ0ksRUFBZXJCLFNBQVNpQixjQUFjLFVBQzVDRCxFQUFTTSxVQUFVQyxJQUFJLGFBQ3ZCTCxFQUFZSSxVQUFVQyxJQUFJLHFCQUMxQkosRUFBWUcsVUFBVUMsSUFBSSxxQkFDMUJMLEVBQVlMLFVBQVloQixFQUFLakIsUUFDN0J3QyxFQUFXSSxhQUFhLFFBQVMscUNBQ2pDSixFQUFXUCxVQUFZLE9BQ3ZCTyxFQUFXakIsaUJBQWlCLFFBQVNDLElBQ25DQSxFQUFFcUIsY0FBY0MsV0FBV0EsV0FBV0osVUFBVUMsSUFUNUIsdUJBVXBCSixFQUFZUSxZQUFZUCxHQUN4QnZCLEVBQUtmLGFBQWMsRUFDbkJELEtBQUs0QixvQkFDTDVCLEtBQUthLGdCQUFnQmIsS0FBS0ksU0FFNUJvQyxFQUFhRyxhQUFhLFFBQVMsdUNBQ25DSCxFQUFhUixVQUFZLFNBQ3pCUSxFQUFhbEIsaUJBQWlCLFFBQVMsS0FDckN0QixLQUFLRyxlQUFlMkMsWUFBWVgsR0FDaENuQyxLQUFLSSxNQUFNMkMsT0FBT2IsRUFBVyxHQUM3QmxDLEtBQUs0QixvQkFDTDVCLEtBQUthLGdCQUFnQmIsS0FBS0ksU0FHeEJZLEVBQUtmLGNBQ1BrQyxFQUFTTSxVQUFVQyxJQXpCQyx1QkEwQnBCSixFQUFZVSxPQUFPUixJQUdoQnhCLEVBQUtmLGFBQ1JxQyxFQUFZVSxPQUFPVCxFQUFZQyxHQUdqQ0wsRUFBU2EsT0FBT1gsRUFBYUMsR0FDN0J0QyxLQUFLRyxlQUFlNkMsT0FBT2IsS0FJL0JyQyxxQkFDRSxNQUFNbUQsRUFBVTlCLFNBQVNDLGVBQWUsaUJBQ2xDOEIsRUFBYS9CLFNBQVNDLGVBQWUsb0JBQ3JDK0IsRUFBZ0JoQyxTQUFTQyxlQUFlLHVCQUN4Q2dDLEVBQWlCakMsU0FBU0MsZUFBZSx3QkFDL0M2QixFQUFRM0IsaUJBQWlCLFFBQVNDLElBQ2hDQSxFQUFFOEIsaUJBQ0ZyRCxLQUFLYSxnQkFBZ0JiLEtBQUtJLFNBRTVCOEMsRUFBVzVCLGlCQUFpQixRQUFTQyxJQUNuQ0EsRUFBRThCLGlCQUNGckQsS0FBS2EsZ0JBQWdCYixLQUFLYyxlQUU1QnFDLEVBQWM3QixpQkFBaUIsUUFBU0MsSUFDdENBLEVBQUU4QixpQkFDRnJELEtBQUthLGdCQUFnQmIsS0FBS2lCLGtCQUU1Qm1DLEVBQWU5QixpQkFBaUIsUUFBU0MsSUFHdkMsR0FGQUEsRUFBRThCLGlCQUVFckQsS0FBS2lCLGVBQWVxQyxPQU10QixPQUxBdEQsS0FBS2lCLGVBQWVnQixRQUFRc0IsSUFDMUJ2RCxLQUFLSSxNQUFNMkMsT0FBTy9DLEtBQUtJLE1BQU1vRCxVQUFVeEMsR0FBUUEsRUFBS2pCLFVBQVl3RCxFQUFjeEQsU0FBVSxLQUUxRkMsS0FBSzRCLHlCQUNMNUIsS0FBS2EsZ0JBQWdCYixLQUFLSSxPQUk1QnlCLE1BQU0sbUNBSVYvQixvQkFDRVMsYUFBYWtELFFBQVEsUUFBU3BELEtBQUtxRCxVQUFVMUQsS0FBS0ksUUFHcEROLDJCQUNFLE1BQU02RCxFQUFVeEMsU0FBU0MsZUFBZSx3QkFDeEMsSUFBSXdDLEVBQVM1RCxLQUFLYyxZQUFZd0MsT0FFOUIsT0FBUU0sR0FDTixLQUFLLEVBQ0hELEVBQVEzQixVQUFZLHVCQUNwQixNQUVGLEtBQUssRUFDSDJCLEVBQVEzQixhQUFlNEIsY0FDdkIsTUFFRixRQUNFRCxFQUFRM0IsYUFBZTRCLGlCQU0vQixNQUFNQyxjQUFnQjFDLFNBQVNDLGVBQWUsY0FDeEMwQyxTQUFXLElBQUk1RCxTQUFTMkQiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUYXNrIHtcclxuICAgIGNvbnN0cnVjdG9yIChjb250ZW50KSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLmlzQ29tcGxldGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFRvRG9MaXN0IHtcclxuICAgIGNvbnN0cnVjdG9yICh0YXNrc0NvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMudGFza3NDb250YWluZXIgPSB0YXNrc0NvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLnRhc2tzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKSkgfHwgW107XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlVGFza3MgPSBbXTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZWRUYXNrcyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLmJpbmRBZGRUYXNrQnV0dG9uKCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0ZpbHRlcnMoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVRhc2tzTGlzdCh0aGlzLnRhc2tzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0aXZlVGFza3MgKCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2ZVRhc2tzID0gdGhpcy50YXNrcy5maWx0ZXIoKHRhc2spID0+IHRhc2suaXNDb21wbGV0ZWQgPT09IGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlVGFza3M7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbXBsZXRlZFRhc2tzICgpIHtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZWRUYXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmlzQ29tcGxldGVkID09PSB0cnVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29tcGxldGVkVGFza3M7XHJcbiAgICB9XHJcblxyXG4gICAgYmluZEFkZFRhc2tCdXR0b24gKCkge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWJ1dHRvbi1hZGQnKTtcclxuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWlucHV0Jyk7XHJcblxyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVUYXNrKGlucHV0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVRhc2soaW5wdXQudmFsdWUpO1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVRhc2sgKGNvbnRlbnQpIHtcclxuICAgICAgICBpZiAoY29udGVudCAhPT0gJycpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFzayA9IG5ldyBUYXNrKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnRhc2tzLnVuc2hpZnQodGFzayk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0xpc3QodGhpcy50YXNrcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhbGVydCgnVHlwZSBzb21ldGhpbmchJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlVGFza3NMaXN0ICh0YXNrc0FycmF5KSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVBY3RpdmVUYXNrc0NvdW50ZXIoKTtcclxuICAgICAgICB0aGlzLnRhc2tzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICB0YXNrc0FycmF5LmZvckVhY2goKHRhc2ssIHRhc2tJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0YXNrSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhc2tDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXNrQWN0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZG9uZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjb25zdCBkb25lVGFza0NsYXNzID0gJ3RvZG8taXRlbS1jb21wbGV0ZWQnO1xyXG4gICAgICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHJcbiAgICAgICAgICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5hZGQoJ3RvZG8taXRlbScpO1xyXG4gICAgICAgICAgICB0YXNrQ29udGVudC5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW0tY29udGVudCcpO1xyXG4gICAgICAgICAgICB0YXNrQWN0aW9ucy5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW0tYWN0aW9ucycpO1xyXG5cclxuICAgICAgICAgICAgdGFza0NvbnRlbnQuaW5uZXJIVE1MID0gdGFzay5jb250ZW50O1xyXG5cclxuICAgICAgICAgICAgZG9uZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RvZG8tdGFzay1idXR0b24gdG9kby1kb25lLWJ1dHRvbicpXHJcbiAgICAgICAgICAgIGRvbmVCdXR0b24uaW5uZXJIVE1MID0gJ0RvbmUnO1xyXG5cclxuICAgICAgICAgICAgZG9uZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoZG9uZVRhc2tDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICB0YXNrQWN0aW9ucy5yZW1vdmVDaGlsZChkb25lQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIHRhc2suaXNDb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUb0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0xpc3QodGhpcy50YXNrcyk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICByZW1vdmVCdXR0b24uc2V0QXR0cmlidXRlKCdjbGFzcycsICd0b2RvLXRhc2stYnV0dG9uIHRvZG8tcmVtb3ZlLWJ1dHRvbicpXHJcbiAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5pbm5lckhUTUwgPSAnRGVsZXRlJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFza3NDb250YWluZXIucmVtb3ZlQ2hpbGQodGFza0l0ZW0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXNrcy5zcGxpY2UodGFza0luZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFza3NMaXN0KHRoaXMudGFza3MpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgaWYgKHRhc2suaXNDb21wbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5hZGQoZG9uZVRhc2tDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICB0YXNrQWN0aW9ucy5hcHBlbmQocmVtb3ZlQnV0dG9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0YXNrLmlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXNrQWN0aW9ucy5hcHBlbmQoZG9uZUJ1dHRvbiwgcmVtb3ZlQnV0dG9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGFza0l0ZW0uYXBwZW5kKHRhc2tDb250ZW50LCB0YXNrQWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMudGFza3NDb250YWluZXIuYXBwZW5kKHRhc2tJdGVtKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVRhc2tzRmlsdGVycyAoKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvd0FsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXNob3ctYWxsJyk7XHJcbiAgICAgICAgY29uc3Qgc2hvd0FjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXNob3ctYWN0aXZlJyk7XHJcbiAgICAgICAgY29uc3Qgc2hvd0NvbXBsZXRlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXNob3ctY29tcGxldGVkJyk7XHJcbiAgICAgICAgY29uc3QgY2xlYXJDb21wbGV0ZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1jbGVhci1jb21wbGV0ZWQnKTtcclxuXHJcbiAgICAgICAgc2hvd0FsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0xpc3QodGhpcy50YXNrcyk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgc2hvd0FjdGl2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0xpc3QodGhpcy5hY3RpdmVUYXNrcyk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgc2hvd0NvbXBsZXRlZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrc0xpc3QodGhpcy5jb21wbGV0ZWRUYXNrcyk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY2xlYXJDb21wbGV0ZWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wbGV0ZWRUYXNrcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGVkVGFza3MuZm9yRWFjaChjb21wbGV0ZWRUYXNrID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tzLnNwbGljZSh0aGlzLnRhc2tzLmZpbmRJbmRleCh0YXNrID0+IHRhc2suY29udGVudCA9PT0gY29tcGxldGVkVGFzay5jb250ZW50KSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFza3NMaXN0KHRoaXMudGFza3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYWxlcnQoJ0FsbCB0YXNrcyBoYXZlIGFjdGl2ZSBzdGF0dXMhJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhZGRUb0xvY2FsU3RvcmFnZSAoKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgSlNPTi5zdHJpbmdpZnkodGhpcy50YXNrcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUFjdGl2ZVRhc2tzQ291bnRlciAoKSB7XHJcbiAgICAgICAgY29uc3QgY291bnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWNvdW50ZXItY29udGVudCcpO1xyXG4gICAgICAgIGxldCBhbW91bnQgPSB0aGlzLmFjdGl2ZVRhc2tzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgc3dpdGNoIChhbW91bnQpIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgY291bnRlci5pbm5lckhUTUwgPSAnQWxsIHRhc2tzIGNvbXBsZXRlZCEnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gYCR7YW1vdW50fSB0YXNrIGxlZnRgO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjb3VudGVyLmlubmVySFRNTCA9IGAke2Ftb3VudH0gdGFza3MgbGVmdGA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCB0b0RvQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8taXRlbXMnKTtcclxuY29uc3QgdG9Eb0xpc3QgPSBuZXcgVG9Eb0xpc3QodG9Eb0NvbnRhaW5lcik7XHJcbiJdLCJmaWxlIjoiaW5kZXgtbWluLmpzIn0=
