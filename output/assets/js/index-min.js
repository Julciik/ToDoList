class Task{constructor(t){this.content=t,this.isCompleted=!1}}class ToDoList{constructor(){this.tasks=JSON.parse(localStorage.getItem("tasks"))||[],this.activeTasks=[],this.completedTasks=[],this.tasksContainer=document.getElementById("todo-items"),this.doneTaskClass="todo-item-completed",this.init()}addTask(){const t=document.getElementById("todo-button-add"),e=document.getElementById("todo-input");t.addEventListener("click",()=>{this.saveTask(e.value),e.value=""})}saveTask(t){if(""!==t){const e=new Task(t);return this.tasks.unshift(e),this.addToLocalStorage(),void this.renderTasks(this.tasks)}alert("Type something!")}createTasksList(t){this.tasksContainer.innerHTML="",t.forEach((t,e)=>{const s=document.createElement("li"),a=document.createElement("span"),o=document.createElement("div"),i=document.createElement("button"),n=document.createElement("button");s.classList.add("todo-item"),a.classList.add("todo-item-content"),o.classList.add("todo-item-actions"),a.innerHTML=t.content,i.setAttribute("class","todo-task-button todo-done-button"),i.innerHTML="Done",i.addEventListener("click",e=>{e.currentTarget.parentNode.parentNode.classList.add(this.doneTaskClass),o.removeChild(i),t.isCompleted=!0,this.addToLocalStorage(),this.renderTasks(this.tasks)}),n.setAttribute("class","todo-task-button todo-remove-button"),n.innerHTML="Delete",n.addEventListener("click",()=>{this.tasksContainer.removeChild(s),this.tasks.splice(e,1),this.addToLocalStorage(),this.renderTasks(this.tasks)}),t.isCompleted&&(s.classList.add(this.doneTaskClass),o.append(n)),t.isCompleted||o.append(i,n),s.append(a,o),this.tasksContainer.append(s)})}tasksFilters(){const t=document.getElementById("todo-show-all"),e=document.getElementById("todo-show-active"),s=document.getElementById("todo-show-completed"),a=document.getElementById("todo-clear-completed");t.addEventListener("click",t=>{t.preventDefault(),this.renderTasks(this.tasks)}),e.addEventListener("click",t=>{t.preventDefault(),this.activeTasks=this.tasks.filter(t=>!1===t.isCompleted),this.renderTasks(activeTasks)}),s.addEventListener("click",t=>{t.preventDefault(),this.completedTasks=this.tasks.filter(t=>!0===t.isCompleted),this.renderTasks(this.completedTasks)}),a.addEventListener("click",t=>{t.preventDefault();const e=this.tasks.filter(t=>!0===t.isCompleted);this.tasksContainer.querySelector(`.${this.doneTaskClass}`);e.forEach(t=>{this.tasks.splice(this.tasks.findIndex(e=>e.content===t.content),1)}),this.addToLocalStorage(),this.renderTasks(this.tasks)})}addToLocalStorage(){localStorage.setItem("tasks",JSON.stringify(this.tasks))}renderTasks(t){this.tasksFilters(),this.createTasksList(t)}init(){this.addTask(),this.renderTasks(this.tasks)}}const toDoList=new ToDoList;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlRhc2siLCJbb2JqZWN0IE9iamVjdF0iLCJjb250ZW50IiwidGhpcyIsImlzQ29tcGxldGVkIiwiVG9Eb0xpc3QiLCJ0YXNrcyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhY3RpdmVUYXNrcyIsImNvbXBsZXRlZFRhc2tzIiwidGFza3NDb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZG9uZVRhc2tDbGFzcyIsImluaXQiLCJidXR0b24iLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzYXZlVGFzayIsInZhbHVlIiwidGFzayIsInVuc2hpZnQiLCJhZGRUb0xvY2FsU3RvcmFnZSIsInJlbmRlclRhc2tzIiwiYWxlcnQiLCJ0YXNrc0FycmF5IiwiaW5uZXJIVE1MIiwiZm9yRWFjaCIsInRhc2tJbmRleCIsInRhc2tJdGVtIiwiY3JlYXRlRWxlbWVudCIsInRhc2tDb250ZW50IiwidGFza0FjdGlvbnMiLCJkb25lQnV0dG9uIiwicmVtb3ZlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiZSIsImN1cnJlbnRUYXJnZXQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJzcGxpY2UiLCJhcHBlbmQiLCJzaG93QWxsIiwic2hvd0FjdGl2ZSIsInNob3dDb21wbGV0ZWQiLCJjbGVhckNvbXBsZXRlZCIsInByZXZlbnREZWZhdWx0IiwiZmlsdGVyIiwicXVlcnlTZWxlY3RvciIsImNvbXBsZXRlZFRhc2siLCJmaW5kSW5kZXgiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidGFza3NGaWx0ZXJzIiwiY3JlYXRlVGFza3NMaXN0IiwiYWRkVGFzayIsInRvRG9MaXN0Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxLQUNKQyxZQUFZQyxHQUNWQyxLQUFLRCxRQUFVQSxFQUNmQyxLQUFLQyxhQUFjLEdBS3ZCLE1BQU1DLFNBQ0pKLGNBQ0VFLEtB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QkEsRUFBS25CLGFBQzNCRCxLQUFLVSxlQUFld0Msa0JBQWtCbEQsS0FBS2EsaUJBQ3RFSixFQUFla0IsUUFBUXdCLElBQ3JCbkQsS0FBS0csTUFBTXVDLE9BQU8xQyxLQUFLRyxNQUFNaUQsVUFBVWhDLEdBQVFBLEVBQUtyQixVQUFZb0QsRUFBY3BELFNBQVUsS0FNMUZDLEtBQUtzQixvQkFDTHRCLEtBQUt1QixZQUFZdkIsS0FBS0csU0FJMUJMLG9CQUNFUSxhQUFhK0MsUUFBUSxRQUFTakQsS0FBS2tELFVBQVV0RCxLQUFLRyxRQUdwREwsWUFBWTJCLEdBQ1Z6QixLQUFLdUQsZUFDTHZELEtBQUt3RCxnQkFBZ0IvQixHQUd2QjNCLE9BQ0VFLEtBQUt5RCxVQUNMekQsS0FBS3VCLFlBQVl2QixLQUFLRyxRQU0xQixNQUFNdUQsU0FBVyxJQUFJeEQiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUYXNrIHtcclxuICAgIGNvbnN0cnVjdG9yIChjb250ZW50KSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLmlzQ29tcGxldGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFRvRG9MaXN0IHtcclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICB0aGlzLnRhc2tzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKSkgfHwgW107XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYXNrcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29tcGxldGVkVGFza3MgPSBbXTtcclxuICAgICAgICB0aGlzLnRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8taXRlbXMnKTtcclxuICAgICAgICB0aGlzLmRvbmVUYXNrQ2xhc3MgPSAndG9kby1pdGVtLWNvbXBsZXRlZCc7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFRhc2sgKCkge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWJ1dHRvbi1hZGQnKTtcclxuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWlucHV0Jyk7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlVGFzayhpbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzYXZlVGFzayAoY29udGVudCkge1xyXG4gICAgICAgIGlmIChjb250ZW50ICE9PSAnJykge1xyXG4gICAgICAgICAgICBjb25zdCB0YXNrID0gbmV3IFRhc2soY29udGVudCk7XHJcbiAgICAgICAgICAgIHRoaXMudGFza3MudW5zaGlmdCh0YXNrKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRUb0xvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tzKHRoaXMudGFza3MpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9UT0RPOiBhZGQgYmV0dGVyIGVycm9yIG1ldGhvZFxyXG4gICAgICAgIGFsZXJ0KCdUeXBlIHNvbWV0aGluZyEnKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVUYXNrc0xpc3QgKHRhc2tzQXJyYXkpIHtcclxuICAgICAgICB0aGlzLnRhc2tzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICB0YXNrc0FycmF5LmZvckVhY2goKHRhc2ssIHRhc2tJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0YXNrSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhc2tDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXNrQWN0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZG9uZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHJcbiAgICAgICAgICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5hZGQoJ3RvZG8taXRlbScpO1xyXG4gICAgICAgICAgICB0YXNrQ29udGVudC5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW0tY29udGVudCcpO1xyXG4gICAgICAgICAgICB0YXNrQWN0aW9ucy5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW0tYWN0aW9ucycpO1xyXG5cclxuICAgICAgICAgICAgdGFza0NvbnRlbnQuaW5uZXJIVE1MID0gdGFzay5jb250ZW50O1xyXG5cclxuICAgICAgICAgICAgZG9uZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RvZG8tdGFzay1idXR0b24gdG9kby1kb25lLWJ1dHRvbicpXHJcbiAgICAgICAgICAgIGRvbmVCdXR0b24uaW5uZXJIVE1MID0gJ0RvbmUnO1xyXG5cclxuICAgICAgICAgICAgZG9uZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQodGhpcy5kb25lVGFza0NsYXNzKTtcclxuICAgICAgICAgICAgICAgIHRhc2tBY3Rpb25zLnJlbW92ZUNoaWxkKGRvbmVCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgdGFzay5pc0NvbXBsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tzKHRoaXMudGFza3MpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgcmVtb3ZlQnV0dG9uLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndG9kby10YXNrLWJ1dHRvbiB0b2RvLXJlbW92ZS1idXR0b24nKVxyXG4gICAgICAgICAgICByZW1vdmVCdXR0b24uaW5uZXJIVE1MID0gJ0RlbGV0ZSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRhc2tJdGVtKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFza3Muc3BsaWNlKHRhc2tJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRvTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhc2tzKHRoaXMudGFza3MpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIGlmICh0YXNrLmlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXNrSXRlbS5jbGFzc0xpc3QuYWRkKHRoaXMuZG9uZVRhc2tDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICB0YXNrQWN0aW9ucy5hcHBlbmQocmVtb3ZlQnV0dG9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0YXNrLmlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXNrQWN0aW9ucy5hcHBlbmQoZG9uZUJ1dHRvbiwgcmVtb3ZlQnV0dG9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGFza0l0ZW0uYXBwZW5kKHRhc2tDb250ZW50LCB0YXNrQWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMudGFza3NDb250YWluZXIuYXBwZW5kKHRhc2tJdGVtKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHRhc2tzRmlsdGVycyAoKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvd0FsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXNob3ctYWxsJyk7XHJcbiAgICAgICAgY29uc3Qgc2hvd0FjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXNob3ctYWN0aXZlJyk7XHJcbiAgICAgICAgY29uc3Qgc2hvd0NvbXBsZXRlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXNob3ctY29tcGxldGVkJyk7XHJcbiAgICAgICAgY29uc3QgY2xlYXJDb21wbGV0ZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1jbGVhci1jb21wbGV0ZWQnKTtcclxuXHJcbiAgICAgICAgc2hvd0FsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGFza3ModGhpcy50YXNrcyk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgc2hvd0FjdGl2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVUYXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmlzQ29tcGxldGVkID09PSBmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGFza3MoYWN0aXZlVGFza3MpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHNob3dDb21wbGV0ZWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAvL1RPRE86IEZpeCBkdXBsaWNhdGVkIGFycmF5c1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWRUYXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmlzQ29tcGxldGVkID09PSB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrcyh0aGlzLmNvbXBsZXRlZFRhc2tzKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjbGVhckNvbXBsZXRlZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFRhc2tzID0gdGhpcy50YXNrcy5maWx0ZXIoKHRhc2spID0+IHRhc2suaXNDb21wbGV0ZWQgPT09IHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRUYXNrSXRlbXMgPSB0aGlzLnRhc2tzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYC4keyB0aGlzLmRvbmVUYXNrQ2xhc3MgfWApO1xyXG5cclxuICAgICAgICAgICAgY29tcGxldGVkVGFza3MuZm9yRWFjaChjb21wbGV0ZWRUYXNrID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFza3Muc3BsaWNlKHRoaXMudGFza3MuZmluZEluZGV4KHRhc2sgPT4gdGFzay5jb250ZW50ID09PSBjb21wbGV0ZWRUYXNrLmNvbnRlbnQpLCAxKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWRUYXNrSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgIC8vVE9ETzogUmVtb3ZlIG5vZGVzXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrcyh0aGlzLnRhc2tzKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFRvTG9jYWxTdG9yYWdlICgpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFza3MnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnRhc2tzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyVGFza3MgKHRhc2tzQXJyYXkpIHtcclxuICAgICAgICB0aGlzLnRhc2tzRmlsdGVycygpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVGFza3NMaXN0KHRhc2tzQXJyYXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQgKCkge1xyXG4gICAgICAgIHRoaXMuYWRkVGFzaygpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyVGFza3ModGhpcy50YXNrcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9UT0RPOiBMZWZ0IHRhc2sgY291bnRlclxyXG59XHJcblxyXG5jb25zdCB0b0RvTGlzdCA9IG5ldyBUb0RvTGlzdCgpO1xyXG4iXSwiZmlsZSI6ImluZGV4LW1pbi5qcyJ9
